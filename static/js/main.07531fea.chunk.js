(this.webpackJsonppungeon=this.webpackJsonppungeon||[]).push([[0],{104:function(e,t,n){},165:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o),i=n(37),a=n.n(i),c=(n(104),n(20)),s=n(3),l=n(4),u=n(11),d=n(10),O=n(5),h=n(1),E=70,b=n(166),j=function(e){return{id:Object(b.a)(),type:e}},y=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"dungeonObjectType",get:function(){return null}},{key:"translate",value:function(e,t,n){}},{key:"createRenderObject",value:function(){return new O.c}},{key:"renderObject",value:function(e,t,n){}},{key:"position",value:function(e){}}]),e}(),f="door",p=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"dungeonObjectType",get:function(){return f}},{key:"translate",value:function(e,t,n){e.start.x+=t,e.start.y+=n,e.end.x+=t,e.end.y+=n}},{key:"renderObject",value:function(e,t,n){e.zIndex=3,e.clear(),e.beginFill(11094,1),e.lineStyle(20,11094,1,.5),e.moveTo(t.start.x*E,t.start.y*E),e.lineTo(t.end.x*E,t.end.y*E),e.lineStyle();var o=10;e.endFill(),e.tint=n?16777011:16777215,e.hitArea=new O.f([t.start.x*E-o,t.start.y*E-o,t.start.x*E+o,t.start.y*E+o,t.end.x*E+o,t.end.y*E+o,t.end.x*E-o,t.end.y*E-o])}},{key:"position",value:function(e){return{x:Math.min(e.start.x,e.end.x),y:Math.min(e.start.y,e.end.y)}}}]),n}(y),T="label",x=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"dungeonObjectType",get:function(){return T}},{key:"translate",value:function(e,t,n){e.position.x+=t,e.position.y+=n}},{key:"position",value:function(e){return e.position}},{key:"renderObject",value:function(e,t,n){if(e.zIndex=4,e.clear(),0===e.children.length){var o=new O.i(t.label);o.style.fontFamily="Serif",o.style.fontSize=36,e.addChild(o)}var r=e.children[0];r.style.fill=n?16777011:0,r.text=t.label,r.position.set(t.position.x*E,t.position.y*E)}}]),n}(y),v="wall",g=function(e,t,n,o){return Object(h.a)(Object(h.a)({},j(v)),{},{start:{x:e,y:t},end:{x:n,y:o}})},_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"dungeonObjectType",get:function(){return v}},{key:"translate",value:function(e,t,n){e.start.x+=t,e.start.y+=n,e.end.x+=t,e.end.y+=n}},{key:"position",value:function(e){return{x:Math.min(e.start.x,e.end.x),y:Math.min(e.start.y,e.end.y)}}},{key:"renderObject",value:function(e,t,n){e.zIndex=2,e.clear(),e.lineStyle(10,157414,1,.5),e.line.cap=O.d.ROUND,e.moveTo(t.start.x*E,t.start.y*E),e.lineTo(t.end.x*E,t.end.y*E),e.lineStyle();e.endFill(),e.tint=n?16777011:16777215,e.hitArea=this.createWallHitArea(t,5)}},{key:"createWallHitArea",value:function(e,t){if(e.start.x===e.end.x&&e.start.y===e.end.y)return new O.b(e.start.x*E,e.start.y*E,t);var n=e.start.x<=e.end.x?e.start:e.end,o=e.start.x>e.end.x?e.start:e.end,r=o.y-n.y,i=o.x-n.x,a=r/i,c=-1/a;if(0===a||0===c)return new O.g(n.x*E-t,Math.min(n.y,o.y)*E-t,i*E+2*t,Math.abs(r)*E+2*t);var s=this.getOffsetAlongSlope(a,t),l=s.xOffset,u=s.yOffset,d=this.getOffsetAlongSlope(c,t),h=d.xOffset,b=d.yOffset;return new O.f([n.x*E-l-h,n.y*E-u-b,n.x*E-l+h,n.y*E-u+b,o.x*E+l+h,o.y*E+u+b,o.x*E+l-h,o.y*E+u-b])}},{key:"getOffsetAlongSlope",value:function(e,t){var n=Math.atan(e);return{xOffset:Math.cos(n)*t,yOffset:Math.sin(n)*t}}}]),n}(y),S=n(12),m="space",C=function(e){var t=e.points,n=e.startX,o=e.startY,r=e.endX,i=e.endY;return t?Object(h.a)(Object(h.a)({},j(m)),{},{points:t}):Object(h.a)(Object(h.a)({},j(m)),{},{position:{x:n,y:o},size:{width:r-n,height:i-o}})},N=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"dungeonObjectType",get:function(){return m}},{key:"translate",value:function(e,t,n){e.position?(e.position.x+=t,e.position.y+=n):e.points.forEach((function(e){e.x+=t,e.y+=n}))}},{key:"position",value:function(e){return e.position?e.position:{x:Math.min.apply(Math,Object(S.a)(e.points.map((function(e){return e.x})))),y:Math.min.apply(Math,Object(S.a)(e.points.map((function(e){return e.y}))))}}},{key:"renderObject",value:function(e,t,n){if(e.clear(),e.beginFill(14079445),t.position&&t.size)e.drawRect(t.position.x*E,t.position.y*E,t.size.width*E,t.size.height*E),e.endFill();else{var o=t.points[0];e.moveTo(o.x*E,o.y*E);for(var r=0;r<t.points.length;r++){var i=t.points[r];e.lineTo(i.x*E,i.y*E)}e.endFill()}e.tint=n?16777164:16777215}}]),n}(y),w="token",M=function(e,t,n,o,r,i){return Object(h.a)(Object(h.a)({},j(w)),{},{textureUrl:e,position:{x:t,y:n},size:{width:o,height:r},angle:i})},D=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"dungeonObjectType",get:function(){return w}},{key:"translate",value:function(e,t,n){e.position.x+=t,e.position.y+=n}},{key:"createRenderObject",value:function(){return new O.h}},{key:"position",value:function(e){return e.position}},{key:"renderObject",value:function(e,t,n){var o;(e.zIndex=4,e.texture=O.j.from("/pungeon"+t.textureUrl),e.x=t.position.x*E,e.y=t.position.y*E,e.width=t.size.width*E,e.height=t.size.height*E,e.angle=t.angle,n)?(0===e.children.length?(o=new O.c,e.addChild(o)):o=e.getChildAt(0),o.clear(),o.lineStyle(5,16776448),o.drawShape(e.getLocalBounds())):e.children.length>0&&e.removeChildAt(0)}}]),n}(y),L=[new p,new x,new _,new N,new D],P=function(e,t,n){return L.filter((function(e){return e.dungeonObjectType===t.type})).map((function(o){return o.renderObject(e,t,n)}))},k=function(e){return L.filter((function(t){return t.dungeonObjectType===e.type})).map((function(e){return e.createRenderObject()}))[0]},I=function(e,t,n){return L.filter((function(t){return t.dungeonObjectType===e.type})).map((function(o){return o.translate(e,t,n)}))},A={PNG_EXPORTED:"PNG_EXPORTED",EXPORT_TO_PNG_CLICKED:"EXPORT_TO_PNG_CLICKED",CLEAR_ONGOING_SPACE_POLYGON:"CLEAR_ONGOING_SPACE_POLYGON",ADD_ONGOING_SPACE_POLYGON:"ADD_ONGOING_SPACE_POLYGON",MOVE_VIEWPORT:"MOVE_VIEWPORT",SET_CURRENT_MOUSE_POSITION:"SET_CURRENT_MOUSE_POSITION",SCROLL_EVENT:"SCROLL_EVENT",MOUSE_DOWN:"MOUSE_DOWN",MOUSE_UP:"MOUSE_UP",SET_SCROLL_MOVES_VIEWPORT:"SET_SCROLL_MOVES_VIEWPORT",SET_THEME:"SET_THEME",SELECT_TOOL:"SELECT_TOOL",SELECT_OBJECT:"SELECT_OBJECT",SELECT_OBJECTS:"SELECT_OBJECTS",KEY_PRESSED:"KEY_PRESSED",KEY_RELEASED:"KEY_RELEASED",COPY_OBJECTS:"COPY_OBJECTS"},R=function(e,t){return{type:A.SELECT_OBJECT,objectId:e,shouldMultiSelect:t}},U=function(e,t){return{type:A.SELECT_OBJECTS,objectIds:e,shouldMultiSelect:t}},G=function(e,t){return{type:A.SET_CURRENT_MOUSE_POSITION,x:e,y:t}},B=n(25),J=function(e,t,n){return Y(e,[t],n)},Y=function(e,t,n){return e.map((function(e){if(t.includes(e.id)){var o=Object(h.a)({},e);return n(o),o}return e}))},W={NEW_DUNGEON:"NEW_DUNGEON",SET_DUNGEON_SIZE:"SET_DUNGEON_SIZE",MOVE_SELECTED_OBJECT:"MOVE_SELECTED_OBJECT",SET_SELECTED_OBJECT_TEXTURE_PATH:"SET_SELECTED_OBJECT_TEXTURE_PATH",SET_SELECTED_OBJECT_ANGLE:"SET_SELECTED_OBJECT_ANGLE",SET_SELECTED_OBJECT_LABEL:"SET_SELECTED_OBJECT_LABEL",SET_SELECTED_OBJECT_POSITION:"SET_SELECTED_OBJECT_POSITION",SET_SELECTED_OBJECT_SIZE:"SET_SELECTED_OBJECT_SIZE",SET_SELECTED_OBJECT_START:"SET_SELECTED_OBJECT_START",SET_SELECTED_OBJECT_END:"SET_SELECTED_OBJECT_END",ADD_OBJECTS:"ADD_OBJECTS",DELETE_OBJECTS:"DELETE_OBJECTS",SET_DUNGEON_NAME:"SET_DUNGEON_NAME"},X={name:"Dungeon",size:{width:28,height:32},objects:[M("/assets/stairs.png",2,4,1,2,0),C({startX:1,startY:1,endX:6,endY:6}),C({startX:6,startY:4,endX:13,endY:13}),C({startX:15,startY:15,endX:21,endY:22}),C({startX:21,startY:19,endX:25,endY:28}),g(1,1,1,6),g(6,6,1,6),g(6,13,6,6),g(13,13,6,13),g(13,4,13,13),g(6,4,13,4),g(6,1,6,4),g(1,1,6,1),g(15,15,15,22),g(21,22,15,22),g(21,15,15,15),g(21,19,21,15),g(25,19,21,19),g(21,22,21,28),g(21,28,25,28),g(25,19,25,28)]},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.NEW_DUNGEON:return{name:"Untitled Dungeon",size:{width:24,height:32},objects:[]};case W.SET_DUNGEON_NAME:return Object(h.a)(Object(h.a)({},e),{},{name:t.name});case W.SET_DUNGEON_SIZE:return Object(h.a)(Object(h.a)({},e),{},{size:{width:t.width,height:t.height}});case W.MOVE_SELECTED_OBJECT:var n=Y(e.objects,t.selectedObjectIds,(function(e){return I(e,t.deltaX,t.deltaY)}));return Object(h.a)(Object(h.a)({},e),{},{objects:n});case W.SET_SELECTED_OBJECT_TEXTURE_PATH:var o=J(e.objects,t.selectedObject,(function(e){return e.textureUrl=t.texturePath}));return Object(h.a)(Object(h.a)({},e),{},{objects:o});case W.SET_SELECTED_OBJECT_ANGLE:var r=J(e.objects,t.selectedObject,(function(e){return e.angle=t.angle}));return Object(h.a)(Object(h.a)({},e),{},{objects:r});case W.SET_SELECTED_OBJECT_LABEL:var i=J(e.objects,t.selectedObject,(function(e){return e.label=t.label}));return Object(h.a)(Object(h.a)({},e),{},{objects:i});case W.SET_SELECTED_OBJECT_POSITION:var a=J(e.objects,t.selectedObject,(function(e){return e.position={x:t.x,y:t.y}}));return Object(h.a)(Object(h.a)({},e),{},{objects:a});case W.SET_SELECTED_OBJECT_SIZE:var c=J(e.objects,t.selectedObject,(function(e){return e.size={width:t.width,height:t.height}}));return Object(h.a)(Object(h.a)({},e),{},{objects:c});case W.SET_SELECTED_OBJECT_START:var s=J(e.objects,t.selectedObject,(function(e){return e.start={x:t.x,y:t.y}}));return Object(h.a)(Object(h.a)({},e),{},{objects:s});case W.SET_SELECTED_OBJECT_END:var l=J(e.objects,t.selectedObject,(function(e){return e.end={x:t.x,y:t.y}}));return Object(h.a)(Object(h.a)({},e),{},{objects:l});case W.ADD_OBJECTS:var u=e.objects.slice();return u=[].concat(Object(S.a)(u),Object(S.a)(t.newObjects)),Object(h.a)(Object(h.a)({},e),{},{objects:u});case W.DELETE_OBJECTS:var d=t.objectIds;if(d){var O=e.objects.filter((function(e){return!d.includes(e.id)}));return Object(h.a)(Object(h.a)({},e),{},{objects:O})}return e;default:return e}},V={SELECT:"select",NEW_WALL:"new_wall",NEW_SPACE_RECTANGLE:"new_space_rectangle",NEW_SPACE_POLYGON:"new_space_polygon",NEW_DOOR:"new_door",NEW_LABEL:"new_label",NEW_TOKEN:"new_token"},H=function(e){return JSON.parse(JSON.stringify(e))},K={SYSTEM_THEME:"SYSTEM_THEME",LIGHT_THEME:"LIGHT_THEME",DARK_THEME:"DARK_THEME"},F={scrollMovesViewport:!1,theme:K.SYSTEM_THEME,selectedTool:V.NEW_SPACE_RECTANGLE,scale:100,position:{x:0,y:0},mouse:{mouseDown:!1,startPosition:{x:0,y:0},currentPosition:{x:0,y:0}},keyboard:{heldKeys:{}},selectedObjectIds:[],clipboard:[]},Z=Object(B.b)({editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.KEY_PRESSED:var n=Object(h.a)({},e.keyboard.heldKeys);return n[t.key]=!0,Object(h.a)(Object(h.a)({},e),{},{keyboard:Object(h.a)(Object(h.a)({},e.keyboard),{},{heldKeys:n})});case A.KEY_RELEASED:var o=Object(h.a)({},e.keyboard.heldKeys);return delete o[t.key],Object(h.a)(Object(h.a)({},e),{},{keyboard:Object(h.a)(Object(h.a)({},e.keyboard),{},{heldKeys:o})});case A.PNG_EXPORTED:return Object(h.a)(Object(h.a)({},e),{},{exportToPngClicked:null});case A.EXPORT_TO_PNG_CLICKED:return Object(h.a)(Object(h.a)({},e),{},{exportToPngClicked:!0});case A.COPY_OBJECTS:return Object(h.a)(Object(h.a)({},e),{},{clipboard:t.objects.map(H)});case A.CLEAR_ONGOING_SPACE_POLYGON:return Object(h.a)(Object(h.a)({},e),{},{ongoingSpacePolygon:null});case A.ADD_ONGOING_SPACE_POLYGON:var r,i=[].concat(Object(S.a)(null!==(r=e.ongoingSpacePolygon)&&void 0!==r?r:[]),[t.position]);return Object(h.a)(Object(h.a)({},e),{},{ongoingSpacePolygon:i});case A.MOVE_VIEWPORT:return Object(h.a)(Object(h.a)({},e),{},{position:{x:e.position.x+t.deltaX,y:e.position.y+t.deltaY}});case A.SET_CURRENT_MOUSE_POSITION:return Object(h.a)(Object(h.a)({},e),{},{mouse:Object(h.a)(Object(h.a)({},e.mouse),{},{currentPosition:{x:t.x,y:t.y}})});case A.SCROLL_EVENT:if(!e.scrollMovesViewport||t.holdingCtrl){var a=10;t.scrollY>0&&(a*=-1);var c=10,s=200,l=Math.min(Math.max(e.scale+a,c),s);return e.scale!==l?Object(h.a)(Object(h.a)({},e),{},{scale:l,position:{x:e.position.x-e.mouse.currentPosition.x*(a/100),y:e.position.y-e.mouse.currentPosition.y*(a/100)}}):e}var u=.5;return Object(h.a)(Object(h.a)({},e),{},{position:{x:e.position.x-t.scrollX*u,y:e.position.y-t.scrollY*u}});case A.MOUSE_DOWN:return Object(h.a)(Object(h.a)({},e),{},{mouse:Object(h.a)(Object(h.a)({},e.mouse),{},{mouseDown:!0,startPosition:{x:e.mouse.currentPosition.x,y:e.mouse.currentPosition.y}})});case A.MOUSE_UP:return Object(h.a)(Object(h.a)({},e),{},{mouse:Object(h.a)(Object(h.a)({},e.mouse),{},{mouseDown:!1})});case A.SET_SCROLL_MOVES_VIEWPORT:return Object(h.a)(Object(h.a)({},e),{},{scrollMovesViewport:t.scrollMovesViewport});case A.SET_THEME:return Object(h.a)(Object(h.a)({},e),{},{theme:t.theme});case A.SELECT_TOOL:var d=e.selectedObjectIds;return t.selectedTool!==V.SELECT&&(d=[]),Object(h.a)(Object(h.a)({},e),{},{selectedTool:t.selectedTool,selectedObjectIds:d});case A.SELECT_OBJECT:var O;return O=t.shouldMultiSelect&&e.selectedObjectIds.includes(t.objectId)?e.selectedObjectIds.filter((function(e){return e!==t.objectId})):t.shouldMultiSelect?[].concat(Object(S.a)(e.selectedObjectIds),[t.objectId]):[t.objectId],Object(h.a)(Object(h.a)({},e),{},{selectedObjectIds:O});case A.SELECT_OBJECTS:var E;return E=t.shouldMultiSelect?Object(S.a)(new Set([].concat(Object(S.a)(e.selectedObjectIds),Object(S.a)(t.objectIds)))):t.objectIds,Object(h.a)(Object(h.a)({},e),{},{selectedObjectIds:E});case W.DELETE_OBJECTS:return Object(h.a)(Object(h.a)({},e),{},{selectedObjectIds:[]});case W.ADD_OBJECTS:return Object(h.a)(Object(h.a)({},e),{},{selectedObjectIds:t.newObjects.map((function(e){return e.id}))});default:return Object(h.a)({},e)}},dungeon:z}),q=Object(B.c)(Z,{},"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),$=function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.target="_blank",n.click()},Q=function(e,t,n,o){var r=q.getState();if(function(e,t){e.stage.position.set(t.editor.position.x,t.editor.position.y)}(e,r),function(e,t){var n=e.editor.scale/100;t.stage.scale.x!==n&&t.stage.scale.set(n)}(r,e),ee(e.stage,r),n.renderGrid(r.dungeon.size.width,r.dungeon.size.height),function(e,t){e.editor.exportToPngClicked&&function(e,t){var n=e.renderer.generateTexture(e.stage,null,1/e.stage.scale.x,new O.g(e.stage.position.x-1,e.stage.position.y-1,e.stage.width,e.stage.height)),o=t.dungeon.name.toLowerCase().replace(/\s/g,"_"),r="".concat(o,"_").concat(t.dungeon.size.width,"x").concat(t.dungeon.size.height,".png");$(e.renderer.extract.base64(n),r),q.dispatch({type:A.PNG_EXPORTED})}(t,e)}(r,e),e.renderer.plugins.interaction.mouseOverRenderer){t.clear(),o.renderTool(r,t);var i=e.renderer.plugins.interaction.mouse.getLocalPosition(e.stage);q.dispatch(G(i.x,i.y))}else q.dispatch(G(null,null))},ee=function(e,t){var n=t.dungeon.objects.reduce((function(e,t){return e[t.id]=t,e}),{}),o=new Set(e.children.map((function(e){return e.id})));Object.keys(n).forEach((function(t){if(!o.has(t)){var r=k(n[t]);r.id=t,r.interactive=!0,e.addChild(r)}})),e.children.forEach((function(o){if(o.id){var r=n[o.id];r?P(o,r,t.editor.selectedObjectIds.includes(o.id)):e.removeChild(o)}}))};var te,ne=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"createRenderObject",value:function(){return this.graphics=new O.c,this.graphics.zIndex=10,this.graphics}},{key:"renderGrid",value:function(e,t){this.graphics.clear(),this.graphics.lineStyle(1,4473924,1,.5);for(var n=0;n<=e;n++)this.graphics.moveTo(n*E,0),this.graphics.lineTo(n*E,t*E);for(var o=0;o<=t;o++)this.graphics.moveTo(0,o*E),this.graphics.lineTo(e*E,o*E);this.graphics.lineStyle()}}]),e}(),oe=n(16),re=function(e){return{type:W.ADD_OBJECTS,newObjects:e}},ie=function(e){return re([e])},ae=function(e){return{type:W.DELETE_OBJECTS,objectIds:e}},ce=function(e,t,n){return{type:W.MOVE_SELECTED_OBJECT,selectedObjectIds:e,deltaX:t,deltaY:n}},se=function(e,t){return{type:W.SET_SELECTED_OBJECT_ANGLE,selectedObject:e,angle:t}},le=function(e){return e*e},ue=function(e,t){return Math.sqrt(le(e.x-t.x)+le(e.y-t.y))},de=function(e,t,n){var o=n.x-t.x,r=n.y-t.y,i=o*o+r*r,a=(e.x-t.x)*o+(e.y-t.y)*r,c=Math.min(1,Math.max(0,a/i));return{x:t.x+o*c,y:t.y+r*c}},Oe=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"onMouseUp",value:function(e){var t=e.getState(),n=t.editor.mouse.currentPosition,o=25,r=null,i=null;t.dungeon.objects.filter((function(e){return e.type===v})).forEach((function(e){var n={x:e.start.x*E,y:e.start.y*E},a={x:e.end.x*E,y:e.end.y*E},c=de({x:t.editor.mouse.startPosition.x,y:t.editor.mouse.startPosition.y},n,a),s=ue(c,{x:t.editor.mouse.startPosition.x,y:t.editor.mouse.startPosition.y});(!o||s<o)&&(o=s,r=c,i=e.id)}));var a=t.dungeon.objects.find((function(e){return e.id===i}));if(a){var c,s,l,u,d={x:a.start.x*E,y:a.start.y*E},O={x:a.end.x*E,y:a.end.y*E},b=de(n,d,O);e.dispatch(ie((c=r.x/E,s=r.y/E,l=b.x/E,u=b.y/E,Object(h.a)(Object(h.a)({},j(f)),{},{start:{x:c,y:s},end:{x:l,y:u}}))))}}},{key:"renderTool",value:function(e,t){var n=e.editor.mouse.currentPosition;if(e.editor.mouse.mouseDown){var o=25,r=null,i=null;if(e.dungeon.objects.filter((function(e){return e.type===v})).forEach((function(t){var n={x:t.start.x*E,y:t.start.y*E},a={x:t.end.x*E,y:t.end.y*E},c=de({x:e.editor.mouse.startPosition.x,y:e.editor.mouse.startPosition.y},n,a),s=ue(c,{x:e.editor.mouse.startPosition.x,y:e.editor.mouse.startPosition.y});(!o||s<o)&&(o=s,r=c,i=t.id)})),!r)return;var a=r.x,c=r.y,s=e.dungeon.objects.find((function(e){return e.id===i})),l={x:s.start.x*E,y:s.start.y*E},u={x:s.end.x*E,y:s.end.y*E},d=de(n,l,u),h=d.x,b=d.y;t.lineStyle(5,16776448),t.line.cap=O.d.ROUND,t.moveTo(a,c),t.lineTo(h,b),t.lineStyle()}else{var j=25,y=null;e.dungeon.objects.filter((function(e){return e.type===v})).forEach((function(e){var t={x:e.start.x*E,y:e.start.y*E},o={x:e.end.x*E,y:e.end.y*E},r=de(n,t,o),i=ue(r,n);(!j||i<j)&&(j=i,y=r)})),y&&(t.lineStyle(),t.beginFill(16776448),t.drawCircle(y.x,y.y,2.5),t.endFill())}}}]),e}(),he=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"onMouseUp",value:function(e){var t,n,o,r=e.getState().editor.mouse.currentPosition,i=r.x/E,a=r.y/E;e.dispatch(ie((t=i,n=a,o="Text Label",Object(h.a)(Object(h.a)({},j(T)),{},{label:o,position:{x:t,y:n}}))))}},{key:"renderTool",value:function(e,t){}}]),e}(),Ee=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"onMouseUp",value:function(e){var t,n=e.getState(),o=n.editor.mouse.currentPosition,r=Math.round(o.x/E),i=Math.round(o.y/E),a=null===(t=n.editor.ongoingSpacePolygon)||void 0===t?void 0:t[0];if(a&&a.x===r&&a.y===i){var c=n.editor.ongoingSpacePolygon;e.dispatch({type:A.CLEAR_ONGOING_SPACE_POLYGON}),e.dispatch(ie(C({points:c})))}else e.dispatch(function(e,t){return{type:A.ADD_ONGOING_SPACE_POLYGON,position:{x:e,y:t}}}(r,i))}},{key:"renderTool",value:function(e,t){var n=e.editor.mouse.currentPosition,o=Math.round(n.x/E)*E,r=Math.round(n.y/E)*E;if(e.editor.ongoingSpacePolygon){t.lineStyle(2,16776448);var i=e.editor.ongoingSpacePolygon[0];t.moveTo(i.x*E,i.y*E);for(var a=1;a<e.editor.ongoingSpacePolygon.length;a++){var c=e.editor.ongoingSpacePolygon[a];t.lineTo(c.x*E,c.y*E)}t.lineTo(o,r),t.lineStyle()}else t.lineStyle(),t.beginFill(16776448),t.drawCircle(o,r,2.5),t.endFill()}}]),e}(),be=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"onMouseUp",value:function(e){var t=e.getState(),n=t.editor.mouse.currentPosition,o=Math.floor(Math.min(t.editor.mouse.startPosition.x,n.x)/E),r=Math.floor(Math.min(t.editor.mouse.startPosition.y,n.y)/E),i=Math.ceil(Math.max(t.editor.mouse.startPosition.x,n.x)/E),a=Math.ceil(Math.max(t.editor.mouse.startPosition.y,n.y)/E);e.dispatch(ie(C({startX:o,startY:r,endX:i,endY:a})))}},{key:"renderTool",value:function(e,t){var n,o,r,i,a=e.editor.mouse.currentPosition;if(e.editor.mouse.mouseDown){var c=Math.min(e.editor.mouse.startPosition.x,a.x),s=Math.min(e.editor.mouse.startPosition.y,a.y),l=Math.max(e.editor.mouse.startPosition.x,a.x),u=Math.max(e.editor.mouse.startPosition.y,a.y);n=Math.floor(c/E)*E,o=Math.floor(s/E)*E,r=(l=Math.floor(l/E)*E+E)-n,i=(u=Math.floor(u/E)*E+E)-o}else n=Math.floor(a.x/E)*E,o=Math.floor(a.y/E)*E,r=E,i=E;t.beginFill(0,0),t.lineStyle(1,16776448),t.drawRect(n,o,r,i),t.endFill()}}]),e}(),je=function(){function e(){Object(s.a)(this,e),this.tokenTextureUrl="/assets/stairs.png",this.height=2,this.width=1}return Object(l.a)(e,[{key:"onMouseUp",value:function(e){var t,n,o=e.getState().editor.mouse.currentPosition;t=Math.floor(o.x/E),n=Math.floor(o.y/E),e.dispatch(ie(M(this.tokenTextureUrl,t,n,this.width,this.height,0)))}},{key:"renderTool",value:function(e,t){var n,o,r=e.editor.mouse.currentPosition;n=Math.floor(r.x/E)*E,o=Math.floor(r.y/E)*E,t.beginFill(0,0),t.lineStyle(1,16776448),t.drawRect(n,o,this.width*E,this.height*E),t.endFill()}}]),e}(),ye=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"onMouseUp",value:function(e){var t=e.getState(),n=t.editor.mouse.currentPosition,o=Math.round(t.editor.mouse.startPosition.x/E),r=Math.round(t.editor.mouse.startPosition.y/E),i=Math.round(n.x/E),a=Math.round(n.y/E);e.dispatch(ie(g(o,r,i,a)))}},{key:"renderTool",value:function(e,t){var n=e.editor.mouse.currentPosition;if(e.editor.mouse.mouseDown){var o=Math.round(e.editor.mouse.startPosition.x/E)*E,r=Math.round(e.editor.mouse.startPosition.y/E)*E,i=Math.round(n.x/E)*E,a=Math.round(n.y/E)*E;t.lineStyle(5,16776448),t.line.cap=O.d.ROUND,t.moveTo(o,r),t.lineTo(i,a),t.lineStyle(),t.endFill()}else{var c=Math.round(n.x/E)*E,s=Math.round(n.y/E)*E;t.lineStyle(),t.beginFill(16776448),t.drawCircle(c,s,2.5),t.endFill()}}}]),e}(),fe=function(e,t){return Math.abs(t.x-e.x)>5||Math.abs(t.y-e.y)>5},pe=function(e,t){return{deltaX:Math.round((e.x-t.x)/E),deltaY:Math.round((e.y-t.y)/E)}},Te=function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}},xe=!1,ve=1,ge=2,_e=4,Se=8,me=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"toolSelected",value:function(e){e.stage.children.forEach((function(e){e.id&&(e.cursor="move")}))}},{key:"toolDeselected",value:function(e){e.stage.children.forEach((function(e){e.id&&(e.cursor="default")}))}},{key:"initializeGraphicsForMoving",value:function(e,t){var n=this;this.graphics=e,this.graphics.zIndex=9,this.graphics.alpha=.5,t.dungeon.objects.filter((function(e){return t.editor.selectedObjectIds.includes(e.id)})).forEach((function(e){var t=k(e);t.id=e.id,n.graphics.addChild(t)}))}},{key:"resetGraphicsAfterMoving",value:function(){this.graphics.removeChildren(0,this.graphics.children.length),this.graphics.zIndex=Number.MAX_SAFE_INTEGER,this.graphics.alpha=1,this.graphics=null,xe=!1}},{key:"onMouseDown",value:function(e,t){var n=e.getState(),o=n.editor.mouse.currentPosition,r=n.editor.keyboard.heldKeys.Shift,i=new O.e(o.x,o.y),a=t.stage.worldTransform.apply(i),c=t.renderer.plugins.interaction.hitTest(a),s=c&&n.editor.selectedObjectIds.includes(c.id);c||r?!c&&r?this.currentStates=ve:c&&r&&s?(this.currentStates=ge|Se,this.lastHitId=c.id):c&&r&&!s?(e.dispatch(R(c.id,r)),this.currentStates=ge):c&&!r&&(s||e.dispatch(R(c.id,r)),this.currentStates=ge|_e,this.lastHitId=c.id):(e.dispatch(U([],!1)),this.currentStates=ve)}},{key:"onMouseUp",value:function(e,t){var n=e.getState(),o=n.editor.mouse.startPosition,r=n.editor.mouse.currentPosition,i=n.editor.keyboard.heldKeys.Shift,a=fe(o,r);if(this.currentStates===ve&&a){var c=Te(o,r),s=[];t.stage.children.forEach((function(e){(function(e,t){var n=Math.max(e.x,t.x),o=Math.min(e.x+e.width,t.x+t.width),r=Math.max(e.y,t.y),i=Math.min(e.y+e.height,t.y+t.height);return o>=n&&i>=r})(e.getLocalBounds(),c)&&e.id&&s.push(e.id)})),e.dispatch(U(s,i))}else if(this.currentStates&Se&&!a)e.dispatch(R(this.lastHitId,!0));else if(this.currentStates&_e&&!a)e.dispatch(R(this.lastHitId,!1));else if(this.currentStates&ge&&a){var l=pe(n.editor.mouse.currentPosition,n.editor.mouse.startPosition),u=l.deltaX,d=l.deltaY;0===u&&0===d||e.dispatch(ce(n.editor.selectedObjectIds,u,d)),this.resetGraphicsAfterMoving()}delete this.currentStates,delete this.lastHitId}},{key:"renderTool",value:function(e,t){var n=this,o=e.editor.mouse.startPosition,r=e.editor.mouse.currentPosition,i=fe(o,r);if(this.currentStates===ve&&i){var a=Te(o,r);t.lineStyle(1,16776448).drawRect(a.x,a.y,a.width,a.height).lineStyle()}else if(this.currentStates&ge&&i){this.graphics||this.initializeGraphicsForMoving(t,e);var c=pe(e.editor.mouse.currentPosition,e.editor.mouse.startPosition),s=c.deltaX,l=c.deltaY;!xe&&(Math.abs(s)>0||Math.abs(l)>0)&&(xe=!0),xe&&e.dungeon.objects.filter((function(t){return e.editor.selectedObjectIds.includes(t.id)})).forEach((function(e){var t=H(e);I(t,s,l);var o=n.graphics.children.filter((function(e){return e.id===t.id}))[0];P(o,t,!1)}))}}}]),e}(),Ce=(te={},Object(oe.a)(te,V.NEW_DOOR,new Oe),Object(oe.a)(te,V.NEW_SPACE_RECTANGLE,new be),Object(oe.a)(te,V.NEW_SPACE_POLYGON,new Ee),Object(oe.a)(te,V.NEW_WALL,new ye),Object(oe.a)(te,V.SELECT,new me),Object(oe.a)(te,V.NEW_LABEL,new he),Object(oe.a)(te,V.NEW_TOKEN,new je),te),Ne=function(){function e(t,n){var o=this;Object(s.a)(this,e),this.onMouseDown=function(e){o.mouseDownCurrentTool(e,o.app)},this.onMouseUp=function(e){o.mouseUpCurrentTool(e,o.app)},this.renderTool=function(e,t){o.selectedTool!==e.editor.selectedTool&&(o.deselectCurrentTool(o.app),o.selectTool(e.editor.selectedTool,o.app)),o.renderCurrentTool(e,t)},this.selectTool(t),this.app=n}return Object(l.a)(e,[{key:"selectTool",value:function(e,t){var n,o;this.selectedTool=e,null===(n=(o=Ce[this.selectedTool]).toolSelected)||void 0===n||n.call(o,t)}},{key:"deselectCurrentTool",value:function(e){var t,n;null===(t=(n=Ce[this.selectedTool]).toolDeselected)||void 0===t||t.call(n,e),this.selectedTool=null}},{key:"renderCurrentTool",value:function(e,t){Ce[this.selectedTool].renderTool(e,t)}},{key:"mouseDownCurrentTool",value:function(e,t){var n,o;null===(n=(o=Ce[this.selectedTool]).onMouseDown)||void 0===n||n.call(o,e,t)}},{key:"mouseUpCurrentTool",value:function(e,t){var n,o;null===(n=(o=Ce[this.selectedTool]).onMouseUp)||void 0===n||n.call(o,e,t)}}]),e}(),we=function(e,t){var n,o=e.editor.clipboard.map((function(e){return e.id=Object(b.a)(),H(e)})),r=Math.floor(e.editor.mouse.currentPosition.x/E),i=Math.floor(e.editor.mouse.currentPosition.y/E),a=(n=e.editor.clipboard[0],L.filter((function(e){return e.dungeonObjectType===n.type})).map((function(e){return e.position(n)}))[0]),c={x:r-a.x,y:i-a.y};o.forEach((function(e){I(e,c.x,c.y)})),t.dispatch(re(o))},Me=function(e,t){var n;e.dispatch((n=t.dungeon.objects.filter((function(e){return t.editor.selectedObjectIds.includes(e.id)})).map(H),{type:A.COPY_OBJECTS,objects:n}))},De=function(e,t){var n;e.repeat||t.dispatch((n=e.key,{type:A.KEY_PRESSED,key:n}));var o=t.getState();switch(e.key){case"Delete":return t.dispatch(ae(o.editor.selectedObjectIds));case"ArrowLeft":return t.dispatch(ce(o.editor.selectedObjectIds,-1,0));case"ArrowRight":return t.dispatch(ce(o.editor.selectedObjectIds,1,0));case"ArrowDown":return t.dispatch(ce(o.editor.selectedObjectIds,0,1));case"ArrowUp":return t.dispatch(ce(o.editor.selectedObjectIds,0,-1));case"a":return e.preventDefault(),void(o.editor.selectedTool===V.SELECT&&e.ctrlKey&&t.dispatch(U(o.dungeon.objects.map((function(e){return e.id})))));case"c":return e.preventDefault(),void(e.ctrlKey&&Me(t,o));case"v":return void(e.ctrlKey&&o.editor.clipboard.length&&we(o,t));default:return}},Le=function(e,t){var n;t.dispatch((n=e.key,{type:A.KEY_RELEASED,key:n}))},Pe=function(e,t,n){1===e.buttons&&(t.dispatch({type:A.MOUSE_DOWN}),n.onMouseDown(t))},ke=function(e,t,n){t.getState().editor.mouse.mouseDown&&(t.dispatch({type:A.MOUSE_UP}),n.onMouseUp(t))},Ie=function(e,t){if(2===e.buttons){var n={movementX:e.movementX/window.devicePixelRatio,movementY:e.movementY/window.devicePixelRatio};t.dispatch({type:A.MOVE_VIEWPORT,deltaX:n.movementX,deltaY:n.movementY})}},Ae=function(e,t){var n,o,r;t.dispatch((n=e.deltaX,o=e.deltaY,r=e.getModifierState("Control"),{type:A.SCROLL_EVENT,scrollX:n,scrollY:o,holdingCtrl:r}))},Re=n(0),Ue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(Re.jsx)("div",{className:"h-full w-full focus:outline-none",tabIndex:-1,ref:function(t){return e.canvasDiv=t}})}},{key:"componentDidMount",value:function(){var e=new O.a({backgroundColor:6250335,sharedLoader:!0,sharedTicker:!0,antialias:!0,resizeTo:this.canvasDiv});this.app=e,e.view.style.position="absolute",this.canvasDiv.appendChild(e.view),window.onresize=function(){e.queueResize()};var t=new O.c;t.zIndex=Number.MAX_SAFE_INTEGER,e.stage.sortableChildren=!0,e.stage.addChild(t);var n=new ne;e.stage.addChild(n.createRenderObject());var o=new Ne(q.getState().editor.selectedTool,e);this.setupInteractions(o),e.ticker.add((function(){Q(e,t,n,o)}))}},{key:"setupInteractions",value:function(e){this.canvasDiv.addEventListener("wheel",(function(e){Ae(e,q),e.preventDefault()})),this.canvasDiv.addEventListener("contextmenu",(function(e){e.preventDefault()})),this.canvasDiv.addEventListener("pointerdown",(function(t){Pe(t,q,e)})),this.canvasDiv.addEventListener("pointerup",(function(t){ke(0,q,e)})),this.canvasDiv.addEventListener("pointermove",(function(e){Ie(e,q)})),this.canvasDiv.addEventListener("keydown",(function(e){De(e,q)})),this.canvasDiv.addEventListener("keyup",(function(e){Le(e,q)}))}}]),n}(r.a.Component),Ge=function(e){var t=e.children,n=e.className,o=e.onClick;return Object(Re.jsx)("button",{className:"p-2 rounded-sm "+n,onClick:o,children:t})},Be=function(e){var t=e.labelText,n=e.type,o=void 0===n?"text":n,r=e.value,i=e.onChange;return Object(Re.jsxs)("label",{className:"block",children:[Object(Re.jsx)("span",{className:"block mb-2",children:t}),Object(Re.jsx)("input",{className:"border-0 p-2 rounded-sm w-full bg-white dark:bg-gray-900",type:o,value:r,onChange:i})]})},Je=function(e){var t=e.labelText,n=e.options,o=e.value,r=e.onChange;return Object(Re.jsxs)("label",{className:"block",children:[Object(Re.jsx)("span",{className:"block mb-2",children:t}),Object(Re.jsx)("select",{className:"border-0 p-2 rounded-sm w-full bg-white dark:bg-gray-900",value:o,onChange:r,children:n.map((function(e){return Object(Re.jsx)("option",{value:e.value,children:e.label})}))})]})},Ye=function(e){var t=e.title,n=e.children;return Object(Re.jsxs)("div",{className:"p-4 rounded-sm shadow-md bg-gray-100 dark:bg-gray-800",children:[Object(Re.jsx)("div",{className:"font-light mb-6 text-3xl text-black dark:text-white",children:Object(Re.jsx)("h5",{children:t})}),Object(Re.jsx)("div",{className:"space-y-4",children:n})]})},We=function(e){var t=e.title,n=e.x,o=e.y,r=e.onUpdate;return Object(Re.jsxs)(Ye,{title:null!==t&&void 0!==t?t:"Position",children:[Object(Re.jsx)(Be,{labelText:"X",type:"number",value:n,onChange:function(e){return r(parseInt(e.target.value),o)}}),Object(Re.jsx)(Be,{labelText:"Y",type:"number",value:o,onChange:function(e){return r(n,parseInt(e.target.value))}})]})},Xe=function(e){var t=e.title,n=e.width,o=e.height,r=e.onUpdate;return Object(Re.jsxs)(Ye,{title:null!==t&&void 0!==t?t:"Size",children:[Object(Re.jsx)(Be,{labelText:"Width",type:"number",value:n,onChange:function(e){return r(parseInt(e.target.value),o)}}),Object(Re.jsx)(Be,{labelText:"Height",type:"number",value:o,onChange:function(e){return r(n,parseInt(e.target.value))}})]})},ze=function(e){var t,n=e.dispatch,o=e.selectedObjectId,i=e.selectedObject,a=e.dungeonName,c=e.dungeonSize,s=e.scrollPansViewport,l=e.theme;return t=o?Object(Re.jsxs)(r.a.Fragment,{children:[void 0!==i.label&&Object(Re.jsx)(Ye,{title:"Label",children:Object(Re.jsx)(Be,{labelText:"Label",value:i.label,onChange:function(e){return n(function(e,t){return{type:W.SET_SELECTED_OBJECT_LABEL,selectedObject:e,label:t}}(o,e.target.value))}})}),void 0!==i.textureUrl&&Object(Re.jsx)(Ye,{title:"Texture Path",children:Object(Re.jsx)(Be,{labelText:"Path",value:i.textureUrl,onChange:function(e){return n(function(e,t){return{type:W.SET_SELECTED_OBJECT_TEXTURE_PATH,selectedObject:e,texturePath:t}}(o,e.target.value))}})}),i.position&&Object(Re.jsx)(We,{x:i.position.x,y:i.position.y,onUpdate:function(e,t){return n(function(e,t,n){return{type:W.SET_SELECTED_OBJECT_POSITION,selectedObject:e,x:t,y:n}}(o,e,t))}}),i.size&&Object(Re.jsx)(Xe,{width:i.size.width,height:i.size.height,onUpdate:function(e,t){return n(function(e,t,n){return{type:W.SET_SELECTED_OBJECT_SIZE,selectedObject:e,width:t,height:n}}(o,e,t))}}),i.start&&Object(Re.jsx)(We,{title:"Start",x:i.start.x,y:i.start.y,onUpdate:function(e,t){return n(function(e,t,n){return{type:W.SET_SELECTED_OBJECT_START,selectedObject:e,x:t,y:n}}(o,e,t))}}),i.end&&Object(Re.jsx)(We,{title:"End",x:i.end.x,y:i.end.y,onUpdate:function(e,t){return n(function(e,t,n){return{type:W.SET_SELECTED_OBJECT_END,selectedObject:e,x:t,y:n}}(o,e,t))}}),void 0!==i.angle&&Object(Re.jsxs)(Ye,{title:"Angle",children:[Object(Re.jsx)(Be,{labelText:"Angle",type:"number",value:i.angle,onChange:function(e){return n(se(o,e.target.value))}}),Object(Re.jsx)("input",{className:"w-full",type:"range",step:"45",min:"-360",max:"360",style:{direction:"rtl"},value:i.angle,onChange:function(e){n(se(o,e.target.value))}})]}),o&&Object(Re.jsx)(Ye,{title:"Actions",children:Object(Re.jsx)(Ge,{className:"border-2 text-red-600 border-red-600 hover:bg-red-600 hover:text-gray-50",onClick:function(){return n(ae([o]))},children:"Delete Object"})})]}):Object(Re.jsxs)(r.a.Fragment,{children:[Object(Re.jsxs)(Ye,{title:"Instructions",children:[Object(Re.jsxs)("p",{children:[Object(Re.jsx)("i",{children:"Right click"})," to pan the view."]}),Object(Re.jsxs)("p",{children:[Object(Re.jsx)("i",{children:"Scroll"})," to zoom in and out."]}),Object(Re.jsxs)("p",{children:[Object(Re.jsx)("i",{children:"Left click and drag"})," to create new spaces with the New Space tool."]}),Object(Re.jsxs)("p",{children:[Object(Re.jsx)("i",{children:"Left click"})," to select spaces with the Select tool."]}),Object(Re.jsxs)("p",{children:[Object(Re.jsx)("i",{children:"Arrow keys"})," will move the currently selected space."]}),Object(Re.jsxs)("p",{children:[Object(Re.jsx)("i",{children:"Delete"})," will delete the currently selected space."]})]}),Object(Re.jsx)(Ye,{title:"Dungeon Properties",children:Object(Re.jsx)(Be,{labelText:"Dungeon Name",value:a,onChange:function(e){return n(function(e){return{type:W.SET_DUNGEON_NAME,name:e}}(e.target.value))}})}),Object(Re.jsx)(Xe,{title:"Dungeon Size",width:c.width,height:c.height,onUpdate:function(e,t){return n(function(e,t){return{type:W.SET_DUNGEON_SIZE,width:e,height:t}}(e,t))}}),Object(Re.jsxs)(Ye,{title:"Actions",children:[Object(Re.jsx)(Ge,{className:"bg-gray-200 hover:bg-gray-300 w-full dark:text-gray-900",onClick:function(){return n({type:A.EXPORT_TO_PNG_CLICKED})},children:"Download Dungeon as PNG"}),Object(Re.jsx)(Ge,{className:"border-2 w-full border-gray-200 hover:bg-gray-200  dark:hover:text-gray-900",onClick:function(){return n({type:W.NEW_DUNGEON})},children:"New Dungeon"})]}),Object(Re.jsxs)(Ye,{title:"Editor Options",children:[Object(Re.jsxs)("label",{className:"block",children:[Object(Re.jsx)("input",{type:"checkbox",value:s,onChange:function(e){return n((t=e.target.checked,{type:A.SET_SCROLL_MOVES_VIEWPORT,scrollMovesViewport:t}));var t}})," Scroll to pan"]}),Object(Re.jsx)(Je,{labelText:"Theme",value:l,options:[{value:K.SYSTEM_THEME,label:"System Default"},{value:K.LIGHT_THEME,label:"Light Theme"},{value:K.DARK_THEME,label:"Dark Theme"}],onChange:function(e){return n(function(e){return{type:A.SET_THEME,theme:e}}(e.target.value))}})]})]}),Object(Re.jsx)("div",{className:"space-y-6",children:t})},Ve=ze=Object(c.b)((function(e){var t=1===e.editor.selectedObjectIds.length?e.editor.selectedObjectIds[0]:null,n=t?e.dungeon.objects.find((function(e){return e.id===t})):null;return{selectedObjectId:t,selectedObject:n,dungeonName:e.dungeon.name,dungeonSize:e.dungeon.size,scrollMovesViewport:e.editor.scrollMovesViewport,theme:e.editor.theme}}))(ze),He=function(e){var t=e.className,n=e.toolName,o=e.toolId,r=e.selectedTool,i=e.onClick;return Object(Re.jsx)("button",{className:"px-4 py-2 "+(r===o?"bg-blue-300 hover:bg-blue-300 dark:bg-blue-900 dark:hover:bg-blue-900":"bg-gray-200 hover:bg-gray-300  dark:bg-gray-700 dark:hover:bg-gray-600")+t,onClick:function(){return i(o)},children:n})},Ke=function(e){var t=e.dispatch,n=e.selectedTool,o=function(e){return t({type:A.SELECT_TOOL,selectedTool:e})};return Object(Re.jsxs)("div",{className:"divide-x divide-gray-300 dark:divide-gray-600",role:"group",children:[Object(Re.jsx)(He,{className:"rounded-l-sm",toolName:"Select",toolId:V.SELECT,selectedTool:n,onClick:o}),Object(Re.jsx)(He,{toolName:"New Rectangular Space",toolId:V.NEW_SPACE_RECTANGLE,selectedTool:n,onClick:o}),Object(Re.jsx)(He,{toolName:"New Polygonal Space",toolId:V.NEW_SPACE_POLYGON,selectedTool:n,onClick:o}),Object(Re.jsx)(He,{toolName:"New Wall",toolId:V.NEW_WALL,selectedTool:n,onClick:o}),Object(Re.jsx)(He,{toolName:"New Door",toolId:V.NEW_DOOR,selectedTool:n,onClick:o}),Object(Re.jsx)(He,{toolName:"New Label",toolId:V.NEW_LABEL,selectedTool:n,onClick:o}),Object(Re.jsx)(He,{className:"rounded-r-sm",toolName:"New Token",toolId:V.NEW_TOKEN,selectedTool:n,onClick:o})]})},Fe=Ke=Object(c.b)((function(e){return{selectedTool:e.editor.selectedTool}}))(Ke),Ze=n(98),qe=(n(164),function(e){var t=e.darkMode;return Object(Re.jsx)("div",{className:"h-full "+(t?"dark":""),children:Object(Re.jsxs)("div",{className:"flex flex-col w-full h-full bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-50",children:[Object(Re.jsx)("nav",{className:"p-3 shadow bg-gray-50 dark:bg-gray-800",children:Object(Re.jsx)("span",{className:"text-4xl font-thin align-text-bottom",children:"pungeon"})}),Object(Re.jsx)("div",{className:"p-3",children:Object(Re.jsx)(Fe,{})}),Object(Re.jsxs)("div",{className:"flex-grow flex px-3 pb-2 overflow-hidden",children:[Object(Re.jsx)("div",{className:"flex-grow",children:Object(Re.jsx)(Ue,{})}),Object(Re.jsx)(Ze.a,{className:"w-80 pl-2",autoHide:!1,children:Object(Re.jsx)("div",{className:"mr-4",children:Object(Re.jsx)(Ve,{})})})]})]})})}),$e=qe=Object(c.b)((function(e){return{darkMode:e.editor.theme===K.DARK_THEME||e.editor.theme===K.SYSTEM_THEME&&window.matchMedia("(prefers-color-scheme: dark)").matches}}))(qe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(Re.jsx)(r.a.StrictMode,{children:Object(Re.jsx)(c.a,{store:q,children:Object(Re.jsx)($e,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[165,1,2]]]);
//# sourceMappingURL=main.07531fea.chunk.js.map