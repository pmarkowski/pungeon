(this["webpackJsonppungeon-react"]=this["webpackJsonppungeon-react"]||[]).push([[0],{24:function(e,t,n){e.exports=n(44)},29:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a,o,r=n(0),i=n.n(r),c=n(10),l=n.n(c),d=(n(29),n(2)),s=n(3),u=n(23),b=n(22),y=n(5),E=n(17),O=n(1),p=function(e,t,n){return e.map((function(e){if(e.id===t){var a=Object(O.a)({},e);return n(a),a}return e}))},f={SELECT:"select",NEW_WALL:"new_wall",NEW_SPACE_RECTANGLE:"new_space_rectangle",NEW_SPACE_POLYGON:"new_space_polygon",NEW_DOOR:"new_door",NEW_LABEL:"new_label"},h={SPACE:"space",WALL:"wall",DOOR:"door",LABEL:"label"},m=n(46),g=function(e,t){return{type:"MOVE_SELECTED_OBJECT",deltaX:e,deltaY:t}},v=function(e,t){return{type:"SET_MOUSE_DUNGEON_POSITION",x:e,y:t}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_ONGOING_SPACE_POLYGON":return Object(O.a)(Object(O.a)({},e),{},{editor:Object(O.a)(Object(O.a)({},e.editor),{},{ongoingSpacePolygon:null})});case"ADD_ONGOING_SPACE_POLYGON":var n,a=[].concat(Object(E.a)(null!==(n=e.editor.ongoingSpacePolygon)&&void 0!==n?n:[]),[t.position]);return Object(O.a)(Object(O.a)({},e),{},{editor:Object(O.a)(Object(O.a)({},e.editor),{},{ongoingSpacePolygon:a})});case"MOVE_VIEWPORT":return Object(O.a)(Object(O.a)({},e),{},{editor:Object(O.a)(Object(O.a)({},e.editor),{},{position:{x:e.editor.position.x+t.deltaX,y:e.editor.position.y+t.deltaY}})});case"SET_MOUSE_DUNGEON_POSITION":return Object(O.a)(Object(O.a)({},e),{},{editor:Object(O.a)(Object(O.a)({},e.editor),{},{mouse:Object(O.a)(Object(O.a)({},e.editor.mouse),{},{dungeonPosition:{x:t.x,y:t.y}})})});case"SCROLL_EVENT":if(!e.scrollMovesViewport||t.holdingCtrl){var o=.1;t.scrollY>0&&(o*=-1);var r=Math.min(Math.max(e.editor.scale+o,.1),2);return e.editor.scale!==r?Object(O.a)(Object(O.a)({},e),{},{editor:Object(O.a)(Object(O.a)({},e.editor),{},{scale:r,position:{x:e.editor.position.x-e.editor.mouse.dungeonPosition.x*o,y:e.editor.position.y-e.editor.mouse.dungeonPosition.y*o}})}):e}var i=.5;return Object(O.a)(Object(O.a)({},e),{},{editor:Object(O.a)(Object(O.a)({},e.editor),{},{position:{x:e.editor.position.x-t.scrollX*i,y:e.editor.position.y-t.scrollY*i}})});case"MOUSE_DOWN":return Object(O.a)(Object(O.a)({},e),{},{mouseDown:!0,mouseStartX:e.editor.mouse.dungeonPosition.x,mouseStartY:e.editor.mouse.dungeonPosition.y});case"MOUSE_UP":return Object(O.a)(Object(O.a)({},e),{},{mouseDown:!1});case"SET_DUNGEON_SIZE":return Object(O.a)(Object(O.a)({},e),{},{dungeon:Object(O.a)(Object(O.a)({},e.dungeon),{},{size:{width:t.width,height:t.height}})});case"SET_SCROLL_MOVES_VIEWPORT":return Object(O.a)(Object(O.a)({},e),{},{scrollMovesViewport:t.scrollMovesViewport});case"MOVE_SELECTED_OBJECT":var c=p(e.dungeon.objects,e.selectedObject,(function(e){return e.position={x:e.position.x+t.deltaX,y:e.position.y+t.deltaY}}));return Object(O.a)(Object(O.a)({},e),{},{dungeon:Object(O.a)(Object(O.a)({},e.dungeon),{},{objects:c})});case"SET_SELECTED_OBJECT_LABEL":var l=p(e.dungeon.objects,e.selectedObject,(function(e){return e.label=t.label}));return Object(O.a)(Object(O.a)({},e),{},{dungeon:Object(O.a)(Object(O.a)({},e.dungeon),{},{objects:l})});case"SET_SELECTED_OBJECT_POSITION":var d=p(e.dungeon.objects,e.selectedObject,(function(e){return e.position={x:t.x,y:t.y}}));return Object(O.a)(Object(O.a)({},e),{},{dungeon:Object(O.a)(Object(O.a)({},e.dungeon),{},{objects:d})});case"SET_SELECTED_OBJECT_SIZE":var s=p(e.dungeon.objects,e.selectedObject,(function(e){return e.size={width:t.width,height:t.height}}));return Object(O.a)(Object(O.a)({},e),{},{dungeon:Object(O.a)(Object(O.a)({},e.dungeon),{},{objects:s})});case"SET_SELECTED_OBJECT_START":var u=p(e.dungeon.objects,e.selectedObject,(function(e){return e.start={x:t.x,y:t.y}}));return Object(O.a)(Object(O.a)({},e),{},{dungeon:Object(O.a)(Object(O.a)({},e.dungeon),{},{objects:u})});case"SET_SELECTED_OBJECT_END":var b=p(e.dungeon.objects,e.selectedObject,(function(e){return e.end={x:t.x,y:t.y}}));return Object(O.a)(Object(O.a)({},e),{},{dungeon:Object(O.a)(Object(O.a)({},e.dungeon),{},{objects:b})});case"ADD_OBJECT":var y=e.dungeon.objects.slice();return y=[].concat(Object(E.a)(y),[t.newObject]),Object(O.a)(Object(O.a)({},e),{},{dungeon:Object(O.a)(Object(O.a)({},e.dungeon),{},{objects:y})});case"SELECT_TOOL":var h=e.selectedObject;return t.selectedTool!==f.SELECT&&(h=null),Object(O.a)(Object(O.a)({},e),{},{selectedTool:t.selectedTool,selectedObject:h});case"SELECT_OBJECT":return e.selectedTool===f.SELECT?Object(O.a)(Object(O.a)({},e),{},{selectedObject:t.objectId}):e;case"DELETE_OBJECT":var m=e.selectedObject;if(m){var g=e.dungeon.objects.filter((function(e){return e.id!==m}));return Object(O.a)(Object(O.a)({},e),{},{selectedObject:null,dungeon:Object(O.a)(Object(O.a)({},e.dungeon),{},{objects:g})})}return e;default:return e}},x=n(12),S=Object(x.b)(j,{scrollMovesViewport:!1,mouseDown:!1,mouseStartX:0,mouseStartY:0,selectedTool:f.NEW_SPACE_RECTANGLE,editor:{scale:1,position:{x:0,y:0},mouse:{dungeonPosition:{x:0,y:0}}},dungeon:{size:{width:28,height:32},objects:[{id:"01f998f7-3ad4-43c6-b498-3249ab470b05",type:"space",position:{x:1,y:1},size:{width:5,height:5}},{id:"79178d8c-3a3e-42ee-b1ec-00dc37a045fc",type:"space",position:{x:6,y:4},size:{width:7,height:9}},{id:"6ce25fdc-9fd4-46c0-a924-74f5f9174193",type:"space",position:{x:15,y:15},size:{width:6,height:7}},{id:"e211fbd3-a817-47a5-bb47-481ba330e46d",type:"space",position:{x:21,y:19},size:{width:4,height:9}},{id:"4abe3330-4a95-4c29-b71d-8ea768da1ee6",type:"wall",start:{x:1,y:1},end:{x:1,y:6}},{id:"ad3c6f9b-f3f0-4025-8073-daacc68483ec",type:"wall",start:{x:6,y:6},end:{x:1,y:6}},{id:"68365136-d12f-4e54-8f7b-4cbd3ab424eb",type:"wall",start:{x:6,y:13},end:{x:6,y:6}},{id:"3d6435e5-8d67-4405-87d0-72c4e8f4dfaa",type:"wall",start:{x:13,y:13},end:{x:6,y:13}},{id:"384ac23d-f5fc-4cd1-9ad7-b528b62fa732",type:"wall",start:{x:13,y:4},end:{x:13,y:13}},{id:"161e3147-ca11-4dc4-a26b-ca8295c5abaa",type:"wall",start:{x:6,y:4},end:{x:13,y:4}},{id:"e8092d63-e7e2-4cd2-8c80-8cd6030980f1",type:"wall",start:{x:6,y:1},end:{x:6,y:4}},{id:"71ed94d3-177b-428b-a8e5-fe25eb79a4ea",type:"wall",start:{x:1,y:1},end:{x:6,y:1}},{id:"0ea47a6f-af9f-4ec6-a7f3-881332643e2a",type:"wall",start:{x:15,y:15},end:{x:15,y:22}},{id:"f7ec5579-7966-4ba4-b8ee-fdaad6372842",type:"wall",start:{x:21,y:22},end:{x:15,y:22}},{id:"1e587060-37cc-4b87-a88a-852c8055cabb",type:"wall",start:{x:21,y:15},end:{x:15,y:15}},{id:"79e1f702-6d60-435b-ba1e-584077a7d479",type:"wall",start:{x:21,y:19},end:{x:21,y:15}},{id:"231997d1-1453-4573-a2c0-0571428d7ac9",type:"wall",start:{x:25,y:19},end:{x:21,y:19}},{id:"85033454-8145-4d36-9b58-5e891f731f25",type:"wall",start:{x:21,y:22},end:{x:21,y:28}},{id:"2c6b4f88-4163-4847-ba05-c4ce865dfd87",type:"wall",start:{x:21,y:28},end:{x:25,y:28}},{id:"57013c9b-609f-4e59-ae1a-fd94a49bac80",type:"wall",start:{x:25,y:19},end:{x:25,y:28}}]}},"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),T=n(4),w=function(e){return e*e},_=function(e,t){return Math.sqrt(w(e.x-t.x)+w(e.y-t.y))},C=function(e,t,n){var a=n.x-t.x,o=n.y-t.y,r=a*a+o*o,i=(e.x-t.x)*a+(e.y-t.y)*o,c=Math.min(1,Math.max(0,i/r));return{x:t.x+a*c,y:t.y+o*c}},L=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"onMouseUp",value:function(e){var t=e.getState(),n=t.editor.mouse.dungeonPosition,a=25,o=null,r=null;t.dungeon.objects.filter((function(e){return e.type===h.WALL})).forEach((function(e){var n={x:70*e.start.x,y:70*e.start.y},i={x:70*e.end.x,y:70*e.end.y},c=C({x:t.mouseStartX,y:t.mouseStartY},n,i),l=_(c,{x:t.mouseStartX,y:t.mouseStartY});(!a||l<a)&&(a=l,o=c,r=e.id)}));var i=t.dungeon.objects.find((function(e){return e.id===r}));if(i){var c,l,d,s,u={x:70*i.start.x,y:70*i.start.y},b={x:70*i.end.x,y:70*i.end.y},y=C(n,u,b);e.dispatch((c=o.x/70,l=o.y/70,d=y.x/70,s=y.y/70,{type:"ADD_OBJECT",newObject:{id:Object(m.a)(),type:h.DOOR,start:{x:c,y:l},end:{x:d,y:s}}}))}}},{key:"renderTool",value:function(e,t){var n=e.editor.mouse.dungeonPosition;if(e.mouseDown){var a=25,o=null,r=null;if(e.dungeon.objects.filter((function(e){return e.type===h.WALL})).forEach((function(t){var n={x:70*t.start.x,y:70*t.start.y},i={x:70*t.end.x,y:70*t.end.y},c=C({x:e.mouseStartX,y:e.mouseStartY},n,i),l=_(c,{x:e.mouseStartX,y:e.mouseStartY});(!a||l<a)&&(a=l,o=c,r=t.id)})),!o)return;var i=o.x,c=o.y,l=e.dungeon.objects.find((function(e){return e.id===r})),d={x:70*l.start.x,y:70*l.start.y},s={x:70*l.end.x,y:70*l.end.y},u=C(n,d,s),b=u.x,y=u.y;t.lineStyle(5,16776448),t.moveTo(i,c),t.lineTo(b,y),t.lineStyle(),t.beginFill(16776448),t.drawCircle(i,c,2.5),t.drawCircle(b,y,2.5),t.endFill()}else{var E=25,O=null;e.dungeon.objects.filter((function(e){return e.type===h.WALL})).forEach((function(e){var t={x:70*e.start.x,y:70*e.start.y},a={x:70*e.end.x,y:70*e.end.y},o=C(n,t,a),r=_(o,n);(!E||r<E)&&(E=r,O=o)})),O&&(t.lineStyle(),t.beginFill(16776448),t.drawCircle(O.x,O.y,2.5),t.endFill())}}}]),e}(),N=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"onMouseUp",value:function(e){var t,n,a,o=e.getState().editor.mouse.dungeonPosition,r=o.x/70,i=o.y/70;e.dispatch((t=r,n=i,a="Text Label",{type:"ADD_OBJECT",newObject:{id:Object(m.a)(),type:h.LABEL,position:{x:t,y:n},label:a}}))}},{key:"renderTool",value:function(e,t){}}]),e}(),D=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"onMouseUp",value:function(e){var t=e.getState(),n=t.editor.mouse.dungeonPosition,a=Math.floor(Math.min(t.mouseStartX,n.x)/70),o=Math.floor(Math.min(t.mouseStartY,n.y)/70),r=Math.ceil(Math.max(t.mouseStartX,n.x)/70),i=Math.ceil(Math.max(t.mouseStartY,n.y)/70);e.dispatch(function(e,t,n,a){return{type:"ADD_OBJECT",newObject:{id:Object(m.a)(),type:h.SPACE,position:{x:e,y:t},size:{width:n-e,height:a-t}}}}(a,o,r,i))}},{key:"renderTool",value:function(e,t){var n,a,o,r,i=e.editor.mouse.dungeonPosition;if(e.mouseDown){var c=Math.min(e.mouseStartX,i.x),l=Math.min(e.mouseStartY,i.y),d=Math.max(e.mouseStartX,i.x),s=Math.max(e.mouseStartY,i.y);n=70*Math.floor(c/70),a=70*Math.floor(l/70),o=(d=70*Math.floor(d/70)+70)-n,r=(s=70*Math.floor(s/70)+70)-a}else n=70*Math.floor(i.x/70),a=70*Math.floor(i.y/70),o=70,r=70;t.beginFill(0,0),t.lineStyle(1,16776448),t.drawRect(n,a,o,r),t.endFill()}}]),e}(),M=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"onMouseUp",value:function(e){var t=e.getState(),n=t.editor.mouse.dungeonPosition,a=Math.round(t.mouseStartX/70),o=Math.round(t.mouseStartY/70),r=Math.round(n.x/70),i=Math.round(n.y/70);e.dispatch(function(e,t,n,a){return{type:"ADD_OBJECT",newObject:{id:Object(m.a)(),type:h.WALL,start:{x:e,y:t},end:{x:n,y:a}}}}(a,o,r,i))}},{key:"renderTool",value:function(e,t){var n=e.editor.mouse.dungeonPosition;if(e.mouseDown){var a=70*Math.round(e.mouseStartX/70),o=70*Math.round(e.mouseStartY/70),r=70*Math.round(n.x/70),i=70*Math.round(n.y/70);t.lineStyle(5,16776448),t.moveTo(a,o),t.lineTo(r,i),t.lineStyle(),t.beginFill(16776448),t.drawCircle(a,o,2.5),t.drawCircle(r,i,2.5),t.endFill()}else{var c=70*Math.round(n.x/70),l=70*Math.round(n.y/70);t.lineStyle(),t.beginFill(16776448),t.drawCircle(c,l,2.5),t.endFill()}}}]),e}(),P=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"onMouseUp",value:function(e,t){}},{key:"renderTool",value:function(e,t){}}]),e}(),A=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"onMouseUp",value:function(e){var t,n,a=e.getState(),o=a.editor.mouse.dungeonPosition,r=Math.round(o.x/70),i=Math.round(o.y/70),c=null===(t=a.editor.ongoingSpacePolygon)||void 0===t?void 0:t[0];if(c&&c.x===r&&c.y===i){var l=a.editor.ongoingSpacePolygon;e.dispatch({type:"CLEAR_ONGOING_SPACE_POLYGON"}),e.dispatch((n=l,{type:"ADD_OBJECT",newObject:{id:Object(m.a)(),type:h.SPACE,points:n}}))}else e.dispatch(function(e,t){return{type:"ADD_ONGOING_SPACE_POLYGON",position:{x:e,y:t}}}(r,i))}},{key:"renderTool",value:function(e,t){var n=e.editor.mouse.dungeonPosition,a=70*Math.round(n.x/70),o=70*Math.round(n.y/70);if(e.editor.ongoingSpacePolygon){t.lineStyle(2,16776448);var r=e.editor.ongoingSpacePolygon[0];t.moveTo(70*r.x,70*r.y);for(var i=1;i<e.editor.ongoingSpacePolygon.length;i++){var c=e.editor.ongoingSpacePolygon[i];t.lineTo(70*c.x,70*c.y)}t.lineTo(a,o),t.lineStyle()}else t.lineStyle(),t.beginFill(16776448),t.drawCircle(a,o,2.5),t.endFill()}}]),e}(),I=(a={},Object(T.a)(a,f.NEW_DOOR,new L),Object(T.a)(a,f.NEW_SPACE_RECTANGLE,new D),Object(T.a)(a,f.NEW_SPACE_POLYGON,new A),Object(T.a)(a,f.NEW_WALL,new M),Object(T.a)(a,f.SELECT,new P),Object(T.a)(a,f.NEW_LABEL,new N),a),k=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"renderObject",value:function(e,t,n){e.zIndex=3,e.clear(),e.beginFill(11094,1),e.lineStyle(20,11094,1,.5),e.moveTo(70*t.start.x,70*t.start.y),e.lineTo(70*t.end.x,70*t.end.y),e.lineStyle();e.endFill(),e.tint=n?16777011:16777215,e.hitArea=new y.c([70*t.start.x-10,70*t.start.y-10,70*t.start.x+10,70*t.start.y+10,70*t.end.x+10,70*t.end.y+10,70*t.end.x-10,70*t.end.y-10])}}]),e}(),W=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"renderObject",value:function(e,t,n){if(e.zIndex=4,e.clear(),0===e.children.length){var a=new y.d(t.label);a.style.fontFamily="Serif",a.style.fontSize=36,e.addChild(a)}var o=e.children[0];o.style.fill=n?16777011:0,o.text=t.label,o.position.set(70*t.position.x,70*t.position.y)}}]),e}(),B=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"renderObject",value:function(e,t,n){e.zIndex=2,e.clear(),e.beginFill(157414,1),e.lineStyle(10,157414,1,.5),e.moveTo(70*t.start.x,70*t.start.y),e.lineTo(70*t.end.x,70*t.end.y),e.lineStyle(),e.drawCircle(70*t.start.x,70*t.start.y,5),e.drawCircle(70*t.end.x,70*t.end.y,5);e.endFill(),e.tint=n?16777011:16777215,e.hitArea=new y.c([70*t.start.x-5,70*t.start.y-5,70*t.start.x+5,70*t.start.y+5,70*t.end.x+5,70*t.end.y+5,70*t.end.x-5,70*t.end.y-5])}}]),e}(),R=function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"renderObject",value:function(e,t,n){if(e.clear(),e.beginFill(14079445),t.position&&t.size)e.drawRect(70*t.position.x,70*t.position.y,70*t.size.width,70*t.size.height),e.endFill();else{var a=t.points[0];e.moveTo(70*a.x,70*a.y);for(var o=0;o<t.points.length;o++){var r=t.points[o];e.lineTo(70*r.x,70*r.y)}e.endFill()}e.tint=n?16777164:16777215}}]),e}(),z=(o={},Object(T.a)(o,h.DOOR,new k),Object(T.a)(o,h.LABEL,new W),Object(T.a)(o,h.WALL,new B),Object(T.a)(o,h.SPACE,new R),o),U=function(e,t){var n=S.getState();if(e.stage.position.set(n.editor.position.x,n.editor.position.y),e.stage.scale.x!==n.editor.scale&&e.stage.scale.set(n.editor.scale),t.clear(),Y(e.stage,n),X(t,n.dungeon.size.width,n.dungeon.size.height),e.renderer.plugins.interaction.mouseOverRenderer){!function(e,t){I[e.selectedTool].renderTool(e,t)}(n,t);var a=e.renderer.plugins.interaction.mouse.getLocalPosition(e.stage);S.dispatch(v(a.x,a.y))}else S.dispatch(v(null,null))},Y=function(e,t){var n=t.dungeon.objects.reduce((function(e,t){return e[t.id]=t,e}),{}),a=new Set(e.children.map((function(e){return e.id})));Object.keys(n).forEach((function(t){if(!a.has(t)){var n=new y.b;n.id=t,n.interactive=!0,n.mouseup=function(){S.dispatch({type:"SELECT_OBJECT",objectId:this.id})},e.addChild(n)}})),e.children.forEach((function(a){if(a.id){var o=n[a.id];o?function(e,t,n){z[t.type].renderObject(e,t,n)}(a,o,t.selectedObject===a.id):e.removeChild(a)}}))},X=function(e,t,n){e.lineStyle(1,4473924,1,.5);for(var a=0;a<t;a++)e.moveTo(70*a,0),e.lineTo(70*a,70*(n-1));for(var o=0;o<n;o++)e.moveTo(0,70*o),e.lineTo(70*(t-1),70*o)},J=function(e,t){switch(e.key){case"Delete":return t.dispatch({type:"DELETE_OBJECT"});case"ArrowLeft":return t.dispatch(g(-1,0));case"ArrowRight":return t.dispatch(g(1,0));case"ArrowDown":return t.dispatch(g(0,1));case"ArrowUp":return t.dispatch(g(0,-1));default:return}},F=function(e,t){t.getState().mouseDown&&(t.dispatch({type:"MOUSE_UP"}),function(e){var t=e.getState();I[t.selectedTool].onMouseUp(e)}(t))},G=function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{height:"85vh"},tabIndex:-1,ref:function(t){return e.canvasDiv=t}})}},{key:"componentDidMount",value:function(){var e=new y.a({backgroundColor:6250335,sharedLoader:!0,sharedTicker:!0,antialias:!0});this.app=e,this.canvasDiv.appendChild(e.view),this.app.resizeTo=this.canvasDiv,this.app.resize();var t=new y.b;t.zIndex=Number.MAX_SAFE_INTEGER,e.stage.sortableChildren=!0,e.stage.addChild(t),this.setupInteractions(),e.ticker.add((function(){U(e,t)}))}},{key:"setupInteractions",value:function(){this.canvasDiv.addEventListener("wheel",(function(e){!function(e,t){t.dispatch(function(e){return{type:"SCROLL_EVENT",scrollX:e.deltaX,scrollY:e.deltaY,holdingCtrl:e.getModifierState("Control")}}(e))}(e,S),e.preventDefault()})),this.canvasDiv.addEventListener("contextmenu",(function(e){e.preventDefault()})),this.canvasDiv.addEventListener("pointerdown",(function(e){var t;t=S,1===e.buttons&&t.dispatch({type:"MOUSE_DOWN"})})),this.canvasDiv.addEventListener("pointerup",(function(e){F(0,S)})),this.canvasDiv.addEventListener("pointermove",(function(e){!function(e,t){var n,a;2===e.buttons&&t.dispatch((n=e.movementX,a=e.movementY,{type:"MOVE_VIEWPORT",deltaX:n,deltaY:a}))}(e,S)})),this.canvasDiv.addEventListener("keydown",(function(e){J(e,S)}))}}]),n}(i.a.Component),V=n(7),Z=function(e){var t=e.title,n=e.children;return i.a.createElement("div",{className:"card bg-dark text-light border-secondary mb-3"},i.a.createElement("div",{className:"card-header border-secondary"},i.a.createElement("h5",null,t)),i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"form-group"},n)))},q=function(e){var t=e.title,n=e.x,a=e.y,o=e.onUpdate;return i.a.createElement(Z,{title:null!==t&&void 0!==t?t:"Position"},i.a.createElement("label",null,"X:",i.a.createElement("input",{className:"form-control bg-secondary text-light",type:"number",value:n,onChange:function(e){return o(parseInt(e.target.value),a)}})),i.a.createElement("label",null,"Y:",i.a.createElement("input",{className:"form-control bg-secondary text-light",type:"number",value:a,onChange:function(e){return o(n,parseInt(e.target.value))}})))},H=function(e){var t=e.title,n=e.width,a=e.height,o=e.onUpdate;return i.a.createElement(Z,{title:null!==t&&void 0!==t?t:"Size"},i.a.createElement("label",null,"Width:",i.a.createElement("input",{className:"form-control bg-secondary text-light",type:"number",value:n,onChange:function(e){return o(parseInt(e.target.value),a)}})),i.a.createElement("label",null,"Height:",i.a.createElement("input",{className:"form-control bg-secondary text-light",type:"number",value:a,onChange:function(e){return o(n,parseInt(e.target.value))}})))},$=function(e){var t=e.dispatch,n=e.selectedObjectId,a=e.selectedObject,o=e.dungeonSize,r=e.scrollPansViewport;return n?i.a.createElement(i.a.Fragment,null,void 0!==a.label&&i.a.createElement(Z,{title:"Label"},i.a.createElement("label",null,"Label:",i.a.createElement("input",{className:"form-control bg-secondary text-light",type:"text",value:a.label,onChange:function(e){return t({type:"SET_SELECTED_OBJECT_LABEL",label:e.target.value})}}))),a.position&&i.a.createElement(q,{x:a.position.x,y:a.position.y,onUpdate:function(e,n){return t(function(e,t){return{type:"SET_SELECTED_OBJECT_POSITION",x:e,y:t}}(e,n))}}),a.size&&i.a.createElement(H,{width:a.size.width,height:a.size.height,onUpdate:function(e,n){return t(function(e,t){return{type:"SET_SELECTED_OBJECT_SIZE",width:e,height:t}}(e,n))}}),a.start&&i.a.createElement(q,{title:"Start",x:a.start.x,y:a.start.y,onUpdate:function(e,n){return t(function(e,t){return{type:"SET_SELECTED_OBJECT_START",x:e,y:t}}(e,n))}}),a.end&&i.a.createElement(q,{title:"End",x:a.end.x,y:a.end.y,onUpdate:function(e,n){return t(function(e,t){return{type:"SET_SELECTED_OBJECT_END",x:e,y:t}}(e,n))}}),n&&i.a.createElement(Z,{title:"Actions"},i.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return t({type:"DELETE_OBJECT"})}},"Delete Object"))):i.a.createElement(i.a.Fragment,null,i.a.createElement(Z,{title:"Instructions"},i.a.createElement("p",null,i.a.createElement("i",null,"Right click")," to pan the view."),i.a.createElement("p",null,i.a.createElement("i",null,"Scroll")," to zoom in and out."),i.a.createElement("p",null,i.a.createElement("i",null,"Left click and drag")," to create new spaces with the New Space tool."),i.a.createElement("p",null,i.a.createElement("i",null,"Left click")," to select spaces with the Select tool."),i.a.createElement("p",null,i.a.createElement("i",null,"Arrow keys")," will move the currently selected space."),i.a.createElement("p",null,i.a.createElement("i",null,"Delete")," will delete the currently selected space.")),i.a.createElement(H,{title:"Dungeon Size",width:o.width,height:o.height,onUpdate:function(e,n){return t(function(e,t){return{type:"SET_DUNGEON_SIZE",width:e,height:t}}(e,n))}}),i.a.createElement(Z,{title:"Editor Options"},i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",value:r,onChange:function(e){return t({type:"SET_SCROLL_MOVES_VIEWPORT",scrollMovesViewport:e.target.checked})}}),"Scroll to pan")))},K=$=Object(V.b)((function(e){return{selectedObjectId:e.selectedObject,selectedObject:e.dungeon.objects.find((function(t){return t.id===e.selectedObject})),dungeonSize:e.dungeon.size,scrollPansViewport:e.scrollPansViewport}}))($),Q=function(e){var t=e.toolName,n=e.toolId,a=e.selectedTool,o=e.onClick;return i.a.createElement("button",{className:"btn btn-secondary"+(a===n?" active":""),onClick:function(){return o(n)}},t)},ee=function(e){var t=e.dispatch,n=e.selectedTool,a=function(e){return t({type:"SELECT_TOOL",selectedTool:e})};return i.a.createElement("div",{className:"btn-group",role:"group"},i.a.createElement(Q,{toolName:"Select",toolId:f.SELECT,selectedTool:n,onClick:a}),i.a.createElement(Q,{toolName:"New Rectangular Space",toolId:f.NEW_SPACE_RECTANGLE,selectedTool:n,onClick:a}),i.a.createElement(Q,{toolName:"New Polygonal Space",toolId:f.NEW_SPACE_POLYGON,selectedTool:n,onClick:a}),i.a.createElement(Q,{toolName:"New Wall",toolId:f.NEW_WALL,selectedTool:n,onClick:a}),i.a.createElement(Q,{toolName:"New Door",toolId:f.NEW_DOOR,selectedTool:n,onClick:a}),i.a.createElement(Q,{toolName:"New Label",toolId:f.NEW_LABEL,selectedTool:n,onClick:a}))},te=ee=Object(V.b)((function(e){return{selectedTool:e.selectedTool}}))(ee);var ne=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("nav",{className:"navbar navbar-dark bg-secondary"},i.a.createElement("span",{className:"navbar-brand"},"Pungeon")),i.a.createElement("div",{className:"px-5"},i.a.createElement("div",{className:"py-2"},i.a.createElement(te,null)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-9"},i.a.createElement(G,null)),i.a.createElement("div",{className:"col-md-3"},i.a.createElement(K,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(V.a,{store:S},i.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.3f019a4c.chunk.js.map